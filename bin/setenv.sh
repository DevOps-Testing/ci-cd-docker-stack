#!/usr/bin/env bash

BIN_DIR=$(dirname $0)
ORIGINAL_WD=$(pwd)
cd $BIN_DIR/..

CONFIG_DIR=$(pwd)
CONFIG_NAME=$(basename $CONFIG_DIR)

NEXUS_CONTAINER_NAME=ci-training_nexus
NEXUS_CONTAINER_ID=$(docker-compose ps -q $NEXUS_CONTAINER_NAME)
GITLAB_CONTAINER_NAME=ci-training_gitlab
GITLAB_CONTAINER_ID=$(docker-compose ps -q $GITLAB_CONTAINER_NAME)
JENKINS_CONTAINER_NAME=ci-training_jenkins
JENKINS_CONTAINER_ID=$(docker-compose ps -q $JENKINS_CONTAINER_NAME)

JENKINS_HOME=/var/jenkins_home

cd ${ORIGINAL_WD}

DATAVOLUMES_DIR_NAME=data-volumes
BACKUP_DIR=$HOME/docker-backups
mkdir -p $BACKUP_DIR
chmod 700 $BACKUP_DIR
chmod g+s $BACKUP_DIR

NEXUS_BACKUP_DIR=$BACKUP_DIR/$NEXUS_CONTAINER_NAME
JENKINS_BACKUP_DIR=$BACKUP_DIR/$JENKINS_CONTAINER_NAME
GITLAB_BACKUP_DIR=$BACKUP_DIR/$GITLAB_CONTAINER_NAME
