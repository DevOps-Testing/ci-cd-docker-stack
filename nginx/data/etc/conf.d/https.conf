#
# HTTPS conf file
#

# Web
server {
    listen              443 ssl;
    ssl_certificate     /etc/cert/Nginx.crt;
    ssl_certificate_key /etc/cert/Nginx.key;
    
    root /data/;
    
    location / {}
}

# Jenkins
server {
    listen              8080;
    #ssl_certificate     /etc/cert/Nginx.crt;
    #ssl_certificate_key /etc/cert/Nginx.key;
       
    location / {  
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_pass         http://jenkins:8080/; 
        proxy_redirect     http://jenkins:8080 https:/80.158.6.63;
        proxy_read_timeout 90;    
    }
}

# Nexus
server {
    listen              8081;
    #ssl_certificate     /etc/cert/Nginx.crt;
    #ssl_certificate_key /etc/cert/Nginx.key;
       
    location / {  
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_pass         http://nexus:8081/; 
        proxy_redirect     http:// https://;
        proxy_read_timeout 90;    
    }
}

# Gogs
server {
    listen              3000;
    #ssl_certificate     /etc/cert/Nginx.crt;
    #ssl_certificate_key /etc/cert/Nginx.key;
       
    location / {  
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_pass         http://gogs:3000/; 
        proxy_redirect     http:// https://;
        proxy_read_timeout 90;    
    }
}

#
# eof ..
